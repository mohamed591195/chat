{% extends 'base.html' %}
{% load static %}
{% load users_tags %}

{% block title %}
Welcome {{user.get_full_name}}
{% endblock %}

{% block css %}
    <link rel="stylesheet" type="text/css" href="{% static 'conversations/home.css' %}"/>
{% endblock %}

{% block body %}
    <main class="thread-main">
        <aside class="thread-list">
            {% for thread in user.threads.all %}
                <div data-id={{thread.id}} class="thread-row {% if thread|has_unseen_message:user %} new-message {% endif %}">
                    {% if thread.is_multi %}
                        <img src="#" />
                    {% else %}
                        {% with thread|get_other_side:user as friend %}
                        <img class="thread-img" src="{{friend.image.url}}" />
                        <strong>{{friend.get_full_name}}</strong>
                        {% endwith %}
                    {% endif %}
                </div>
            {% endfor %}
        </aside>
        <div class="chat-container">

            <div class="chat-log">
                <!-- messages appears here -->
            </div>

            <div class="chat-input-area">
                <input id='message-input' type="text" placeholder="type your message">
                <i class="fa fa-paper-plane fa-lg" aria-hidden="true"></i>
            </div>
        </div>
    </main>
{% endblock %}

{% block js %}
<script type="text/javascript" src="{% static 'conversations/home.js'%}"></script>
{% endblock %}